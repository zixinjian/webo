<!DOCTYPE html>
<html>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../asserts/3rd/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../asserts/3rd/bootstrap-table/bootstrap-table.css">
</head>
<body>
<div style="padding:20px;">
    <button id="add_item" type="button" class="btn btn-primary">添加</button>
    <table id="item_table">
        <thead>
            <tr>
                {{str2html .thlist}}
            </tr>
        </thead>
    </table>
</div>
<script src="../../asserts/3rd/jquery/jquery.js"></script>
<script src="../../asserts/3rd/bootstrap/js/bootstrap.min.js"></script>
<script src="../../asserts/3rd/bootstrap-table/bootstrap-table.js"></script>
<script src="../../asserts/3rd/bootstrap-table/locale/bootstrap-table-zh-CN.js"></script>
<script>
    var $table = $("#item_table")
    $(function(){
        $table.bootstrapTable({url:"/item/list/{{.item}}", method:"post", sidePagination:"server", pagination:true, height:getHeight()});
        $("#add_item").on("click", function(){
            //console.log("click add user")
            top.showTopModal({url:"/ui/add/{{.item}}", refreshContent:refreshContent});
        })
        $(window).resize(function () {
            $table.bootstrapTable('resetView', {
                height: getHeight()
            });
        });
    });
    function refreshContent(options){
        top.hideTopModal()
        $table.bootstrapTable("refresh")
//        console.log("refreshs")
    }
    function queryParams(){
        return {"abc":"abc"}
    }

    function getHeight() {
        return $(window).height()-50;
    }
</script>
</body>
</html>